window.onload=function(){cssWidth();resize();mTip();mLogin();banner();news();tab();video();topList()};var $=function(a){return typeof a==="string"?document.getElementById(a):a};var getStyle=function(b,a){if(b.currentStyle){return b.currentStyle[a]}else{return getComputedStyle(b,false)[a]}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){var b;if(this==null){throw new TypeError('"this" is null or not defined')}var e=Object(this);var a=e.length>>>0;if(a===0){return -1}var f=+d||0;if(Math.abs(f)===Infinity){f=0}if(f>=a){return -1}b=Math.max(f>=0?f:a-Math.abs(f),0);while(b<a){if(b in e&&e[b]===c){return b}b++}return -1}}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}var cl=("classList" in document.createElement("a"));function ctrlClass(a){if(!a.ele||!a.c){return false}var b=null;typeof(a.c)==="string"?b=a.c.trim().replace(/\s+/g," ").split(" "):b=a.c;return a.fun({ele:a.ele,c:b});a.ele=null}var hasClass=function(a,b){return ctrlClass({ele:a,c:b,fun:function(f){var e=f.ele.className.split(" ");var g=f.c;for(var d=0;d<g.length;d++){if(e.indexOf(g[d])!==-1){return true}}return false}})};var addClass=function(a,b){ctrlClass({ele:a,c:b,fun:function(e){var f=e.ele,g=e.c;for(var d=0;d<g.length;d++){if(!hasClass(f,g[d])){f.className=f.className!==""?(f.className+" "+g[d]):g[d]}}}})};var removeClass=function(a,b){ctrlClass({ele:a,c:b,fun:function(f){var g=f.ele,h=f.c,e=g.className.split(" ");for(var d=0;d<h.length;d++){if(hasClass(g,h[d])){e.splice(e.indexOf(h[d]),1)}}g.className=e.join(" ")}})};var toggleClass=function(a,b){ctrlClass({ele:a,c:b,fun:function(e){var f=e.ele,g=e.c;for(var d=0;d<g.length;d++){!!hasClass(f,g[d])?removeClass(f,g[d]):addClass(f,g[d])}}})};var getEventTarget=function(a){a=a||window.event;return a.target||a.srcElement};var editCell=function(b){var a=getEventTarget(b);if(a.tagName.toLowerCase()=="td"){}};var addEvent=function(b,g,k,d){if(typeof b!="object"||typeof k!="function"){return}try{b[d?"removeEventListener":"addEventListener"](g,k,false)}catch(f){var j="_"+g;b[j]=b[j]||[];if(d){var a=b[j].length;for(var c=0;c<a;c++){if(b[j][c].toString()===k.toString()){b[j].splice(c,1)}}}else{var a=b[j].length;var h=false;for(var c=0;c<a;c++){if(b[j][c].toString()===k.toString()){h=true}}if(!h){b[j].push(k)}}b["on"+g]=function(){var e=b[j].length;for(var m=0;m<e;m++){b[j][m].apply(b,arguments)}}}};var delEvent=function(a,c,b){addEvent(a,c,b,true)};var stopBubble=function(a){if(a&&a.stopPropagation){a.stopPropagation()}else{window.event.cancelBubble=true}};var stopDefault=function(a){if(a&&a.preventDefault){a.preventDefault()}else{window.event.returnValue=false;return false}};var getCookie=function(){var c={};var d=document.cookie;if(d===""){return c}var g=d.split("; ");for(var b=0;b<g.length;b++){var e=g[b];var h=e.indexOf("=");var a=e.substring(0,h);a=decodeURIComponent(a);var f=e.substring(h+1);f=decodeURIComponent(f);c[a]=f}return c};var setCookie=function(b,e,a,g,d,f){var c=encodeURIComponent(b)+"="+encodeURIComponent(e);if(a){c+=";expires="+a.toGMTString()}if(g){c+=";path="+g}if(d){c+=";domain="+d}if(f){c+=";secure="+f}document.cookie=c};var removeCookie=function(a,c,b){document.cookie=a+"="+"; path="+c+"; domain="+b+"; max-age=0"};var serialize=function(d){if(!d){return""}var c=[];for(var a in d){if(!d.hasOwnProperty(a)){continue}if(typeof d[a]==="function"){continue}var b=d[a].toString();a=encodeURIComponent(a);b=encodeURIComponent(b);c.push(a+"="+b)}return c.join("&")};var get=function(b,a,e){function c(){if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP")}else{if(window.XMLHttpRequest){return new XMLHttpRequest()}}}var d=c();d.onreadystatechange=function(){if(d.readyState==4){if((d.status>=200&&d.status<300)||d.status==304){e(d.responseText)}else{}}};d.open("get",b+"?"+serialize(a),true);d.send(null)};var post=function(b,a,e){function c(){if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP")}else{if(window.XMLHttpRequest){return new XMLHttpRequest()}}}var d=c();d.onreadystatechange=function(){if(d.readyState==4){if((d.status>=200&&d.status<300)||d.status==304){e(d.responseText)}else{alert("Request was unsuccessful"+d.status)}}};d.open("post",b,true);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(serialize(a))};var disabledMouseWheel=function(){if(document.addEventListener){document.addEventListener("DOMMouseScroll",scrollFunc,false)}window.onmousewheel=document.onmousewheel=scrollFunc};function scrollFunc(a){a=a||window.event;if(a.preventDefault){a.preventDefault();a.stopPropagation()}else{a.cancelBubble=true;a.returnValue=false}return false}var mouseWheel=function(){if(document.addEventListener){document.addEventListener("DOMMouseScroll",scrollfunc,true)}window.onmousewheel=document.onmousewheel=scrollfunc};function scrollfunc(a){a=a||window.event;if(a.preventDefault){a.stopPropagation()}else{a.cancelBubble=true;a.returnValue=true}return true
}var fadeIn=function(c,d){var a=getStyle(c,"opacity");if(a==1){return false}var b=0;clearInterval(c.timer);c.timer=setInterval(function(){var e=10;if(b==100){clearInterval(c.timer)}else{b+=e;c.style.opacity=b/100;c.style.filter="alpha(opacity="+b+")"}},50)};var fadeOut=function(c,d){var a=getStyle(c,"opacity");if(a==0){return false}var b=100;clearInterval(c.timer);c.timer=setInterval(function(){var e=-10;if(b==0){clearInterval(c.timer)}else{b+=e;c.style.opacity=b/100;c.style.filter="alpha(opacity="+b+")"}},50)};var resize=function(){var a=false;window.onresize=function(){if(!a){cssWidth();setTimeout(function(){a=false},1000)}a=true}};var cssWidth=function(){if(window.innerWidth){var d=window.innerWidth}else{if((document.body)&&(document.body.clientWidth)){var d=document.body.clientWidth}}var c=$("m-c-wrap1");var b=$("m-c-wrap2");if(d<1205){console.log("小屏幕");var h=document.styleSheets;var k=h[1].cssRules||h[1].rules;var e=k[0];e.style.width=962+"px";var m=$("m-wrap");m.style.width=962+"px";var g=$("m-list");var j=g.getElementsByTagName("dl");var a=j.length;for(var f=0;f<a;f++){j[f].style.width=272+"px";j[f].style.marginRight=70+"px";j[a-1].style.marginRight=0+"px"}var l=$("g-f-wrap");l.style.padding=0;turn(15)}else{console.log("大屏幕");var h=document.styleSheets;var k=h[1].cssRules||h[1].rules;var e=k[0];e.style.width=1206+"px";var m=$("m-wrap");m.style.width=1206+"px";var g=$("m-list");var j=g.getElementsByTagName("dl");var a=j.length;for(var f=0;f<a;f++){j[f].style.width=342+"px";j[f].style.marginRight=80+"px";j[a-1].style.marginRight=0+"px"}var l=$("g-f-wrap");l.style.paddingLeft=50+"px";l.style.paddingRight=50+"px";turn(20)}};var mTip=function(){var a=document.cookie.indexOf("mTip");var b=new Date();b.setTime(b.getTime()+60*60*1000);if(a!==-1){$("mtip").className+=" z-tip";$("gheader").className+=" z-header"}else{addEvent($("mtipbtn"),"click",function(){$("mtip").className+=" z-tip";$("gheader").className+=" z-header";setCookie("mTip","1",b)})}};var mLogin=function(){var a=document.cookie.indexOf("followSuc");var c=$("form").usename;var b=$("form").password;var i={};var h=new Date();h.setTime(h.getTime()+60*60*1000);function j(d,k){if(!d){nmsg.innerHTML="";removeClass(nmsg,"j-suc");removeClass(nmsg,"j-err")}else{nmsg.innerHTML=k;addClass(nmsg,d)}}function f(d){$("form").loginBtn.disabled=!!d;var k=!d?"remove":"add";$("form").loginBtn.classList[k]("j-disabled")}function e(d,k){j("j-err",k);addClass(d,"j-error");d.focus()}function g(d){j();removeClass(d,"j-error")}addEvent($("form"),"input",function(d){g(d.target);f(false)});if(a!==-1){$("mloginacon").className+=" m-login z-login-acon"}else{addEvent($("mlogincon"),"click",function(){$("mloginmodal").className+=" z-loginmodal-show"});addEvent($("form"),"submit",function(m){stopDefault(m);var k=b,d=k.value,l="";if(d.length<6){l="密码长度必须大于6位"}else{if(!/\d/.test(d)||!/[a-z]/i.test(d)){l="密码必须包含数字和字母"}}if(!!l){stopDefault(m);e(k,l);return}i.userName=hex_md5(c.value);i.password=hex_md5(b.value);get("http://study.163.com/webDev/login.htm",i,function(){c.value="";b.value="";$("mloginmodal").className="m-loginmodal";$("mloginacon").className+=" m-login z-login-acon";setCookie("loginSuc","1",h,"/");get("http://study.163.com/webDev/attention.htm",{},function(){setCookie("followSuc","1",h,"/")})})})}addEvent($("closelogin"),"click",function(d){$("mloginmodal").className="m-loginmodal";c.value="";b.value="";g(d.target)});addEvent($("mloginbtn"),"click",function(){$("mloginacon").className="m-login-acon";removeCookie("followSuc","/","127.0.0.1");removeCookie("loginSuc","/","127.0.0.1");console.log(getCookie())})};var banner=function(){var d=$("m-banner");var h=$("m-b-wrap").getElementsByTagName("li");var g=$("m-b-box").getElementsByTagName("i");var b=0;var a=0;for(var c=0;c<h.length;c++){h[c].style.filter="alpha(opacity=0)"}h[0].style.filter="alpha(opacity=100)";h[0].style.opacity="1";var f=setInterval(e,5000);function e(){if(b==h.length-1){b=0}else{b++}for(var j=0;j<h.length;j++){fadeOut(h[j]);removeClass(g[j],"m-bactive")}fadeIn(h[b]);addClass(g[b],"m-bactive")}for(var c=0;c<g.length;c++){g[c].index=c;addEvent(g[c],"click",function(){if(this.className=="m-bactive"){b=this.index}else{for(var j=0;j<g.length;j++){removeClass(g[j],"m-bactive");fadeOut(h[j])}var k=this;addClass(k,"m-bactive");fadeIn(h[this.index]);b=this.index}})}addEvent(d,"mouseover",function(){clearInterval(f)});addEvent(d,"mouseout",function(){f=setInterval(e,5000)})};var news=function(){var c=25;var b=$("m-n-wrap");var k=$("m-n-wrap0");var i=$("m-n-wrap1");var h=$("m-n-wrap2");var j=i.getElementsByTagName("li");var g=j[0].offsetWidth+4;var f=parseInt(getStyle(j[0],"width"))+parseInt(getStyle(j[0],"marginRight"));i.style.width=j.length*f+"px";h.style.width=j.length*f+"px";k.style.width=(j.length*f)*2+"px";var d=i.innerHTML;h.innerHTML=d;function e(){if(h.offsetWidth-b.scrollLeft<=0){b.scrollLeft-=i.offsetWidth}else{b.scrollLeft++}}var a=setInterval(e,c);addEvent(b,"mouseover",function(){clearInterval(a)});
addEvent(b,"mouseout",function(){a=setInterval(e,c)})};var video=function(){var a=$("m-video");var b=$("mvideomodal");var d=$("mvideoclose");var c=$("video");addEvent(a,"click",function(e){stopDefault(e);addClass(b,"z-videomodal-show")});addEvent(d,"click",function(e){stopDefault(e);removeClass(b,"z-videomodal-show");c.pause()})};var topList=function(){var a=$("m-t-wrap");get("http://study.163.com/webDev/hotcouresByCategory.htm",{},function(f){var f=JSON.parse(f);for(var g=0;g<f.length;g++){var e=f[g].smallPhotoUrl;var b=f[g].name;var k=f[g].learnerCount;a.innerHTML+='<li>									<a href="" class="clearfix">										<img src="'+e+'" alt="">										<dl>											<dt>'+b+"</dt>											<dd>"+k+"</dd>										</dl>									</a>								</li>"}var l=a.getElementsByTagName("li");var j=l[0].offsetHeight+20;var n=parseInt(getStyle(a,"paddingTop"));var c;a.innerHTML+=a.innerHTML;function h(){a.style.height=l.length*j+"px";return a.style.height}h();function m(){if(parseInt(a.style.top)+parseInt(h())/2==0){a.style.top=0}else{a.style.top=a.offsetTop-1+"px";for(var p=0;p<l.length;p++){var o=l[p].offsetTop-n+j;if(Math.abs(a.offsetTop)==o){clearInterval(d);c=setTimeout(function(){d=setInterval(m,40)},5000)}}}}var d=setInterval(m,40);addEvent(a,"mouseover",function(){clearInterval(d);clearTimeout(c)});addEvent(a,"mouseout",function(){d=setInterval(m,40)})})};var tab=function(){var a=$("m-tab").getElementsByTagName("h2");var c=$("m-conlist").getElementsByTagName("ul");c[0].className=("clearfix m-c-w z-mcwarp-show");for(var b=0;b<a.length;b++){a[b].index=b;addEvent(a[b],"click",function(){if(this.className=="m-tactive"){return}else{for(var d=0;d<a.length;d++){removeClass(a[d],"m-tactive");c[d].className=("clearfix m-c-w z-mcwarp-hide")}addClass(this,"m-tactive");c[this.index].className=("clearfix m-c-w z-mcwarp-show")}})}};function setList(c,a,b){get("http://study.163.com/webDev/couresByCategory.htm",a,function(h){var h=JSON.parse(h);for(var j=0;j<h.list.length;j++){var g=h.list[j].bigPhotoUrl;var d=h.list[j].name;var m=h.list[j].provider;var l=h.list[j].learnerCount;var k=h.list[j].price;var f=h.list[j].categoryName;var o=h.list[j].description;if(k==0){k="免费"}c.innerHTML+='<li>									<a href="#" class="m-c-box">										<div class="m-con">											<img src="'+g+'" alt="">											<dl>												<dt>'+d+"</dt>												<dd>"+m+'</dd>												<dd class="m-stus">'+l+'</dd>												<dd class="m-price">￥<span>'+k+'</span></dd>											</dl>										</div>										<div class="m-contip">											<div class="m-c-title clearfix">												<img src="'+g+'" alt="">												<dl>													<dt>'+d+'</dt>													<dd class="m-c-stus"><span>'+l+'</span>人在学</dd>													<dd class="m-c-prom">发布者：<span>'+m+'</span></dd>													<dd class="m-c-clas">分类：<span>'+f+'</span></dd>												</dl>											</div>											<div class="m-c-content">												<p>'+o+"</p>											</div>										</div>									</a>								</li>"}var n=c.getElementsByTagName("li");var e;for(var j=0;j<n.length;j++){addEvent(n[j],"mouseenter",function(q){var q=q||window.event;var p=q.target||q.srcElement;if(p.nodeName.toLowerCase()=="li"){var r=p.getElementsByTagName("div");function i(){setTimeout(function(){fadeIn(r[1])},1000);addClass(r[1],"z-contip")}e=setTimeout(i,1200)}});addEvent(n[j],"mouseleave",function(p){var p=p||window.event;var i=p.target||p.srcElement;if(i.nodeName.toLowerCase()=="li"){var q=i.getElementsByTagName("div");setTimeout(function(){removeClass(q[1],"z-contip")},1000);fadeOut(q[1])}clearTimeout(e)})}})}var turn=function(a){var f=$("m-turn");var d=$("m-tab1");var c=$("m-tab2");function b(n,l,j,r,p,q,k){var m=$(n);var o=$(l);var h=$(j);var i={pageNo:r,psize:p,type:q};get("http://study.163.com/webDev/couresByCategory.htm",i,function(t){var t=JSON.parse(t);var s=t.pagination.pageIndex;var u=t.pagination.totlePageCount;if(o.className=="m-tactive"){m.innerHTML="";e({id:n,nowNum:s,allNum:u,callBack:function(w,x){var v=true;var y={pageNo:w,psize:p,type:q};if(v){v=false;h.innerHTML="";setList(h,y,function(){v=true})}}},k)}})}var g=setTimeout(function(){b("m-turn","m-tab1","m-c-wrap1",1,a,10,8)},0);addEvent(d,"click",function(){b("m-turn","m-tab1","m-c-wrap1",1,a,10,8)});addEvent(c,"click",function(){b("m-turn","m-tab2","m-c-wrap2",1,a,20,8)});function e(h,n){if(!h.id){return false}var l=$("m-turn");var n=n;var o=h.nowNum||1;var q=h.allNum||n;var j=h.callBack||function(){};if(o>=2){var p=document.createElement("a");p.href="#"+(o-1);p.className="m-t-left";l.appendChild(p)}if(q<=n){for(var m=1;m<=q;m++){var p=document.createElement("a");p.href="#"+m;if(o==m){p.innerHTML=m;p.className="z-t-active"}else{p.innerHTML=m}l.appendChild(p)}}else{for(var m=1;m<=n;m++){var p=document.createElement("a");if(o==1||o==2||o==3){p.href="#"+m;if(o==m){p.innerHTML=m;p.className="z-t-active"}else{p.innerHTML=m}}else{if((q-o)==0||(q-o)==1||(q-o)==2||(q-o)==3){p.href="#"+(q-n+m);if((q-o)==0&&m==n){p.innerHTML=(q-n+m);p.className="z-t-active"
}else{if((q-o)==1&&m==(n-1)){p.innerHTML=(q-n+m);p.className="z-t-active"}else{if((q-o)==2&&m==(n-2)){p.innerHTML=(q-n+m);p.className="z-t-active"}else{if((q-o)==3&&m==(n-3)){p.innerHTML=(q-n+m);p.className="z-t-active"}else{p.innerHTML=(q-n+m)}}}}}else{p.href="#"+(o-n/2+m);if(m==n/2){p.innerHTML=(o-n/2+m);p.className="z-t-active"}else{p.innerHTML=(o-n/2+m)}}}l.appendChild(p)}}if((q-o)>=1){var p=document.createElement("a");p.href="#"+(o+1);p.className="m-t-right";l.appendChild(p)}j(o,q);var k=l.getElementsByTagName("a");for(var m=0;m<k.length;m++){addEvent(k[m],"click",function(r){var i=parseInt(this.getAttribute("href").substring(1));l.innerHTML="";e({id:h.id,nowNum:i,allNum:q,callBack:j},8);stopDefault(r)})}}};